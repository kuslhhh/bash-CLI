"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=e=>Array.isArray(e)?e:[e],t=l=>{var n,a,o;const v=null!==(n=null==l?void 0:l.mapKey)&&void 0!==n?n:e=>e,s=new Map(null!==(a=null==l?void 0:l.values)&&void 0!==a?a:[]),r=new Map(null!==(o=null==l?void 0:l.keys)&&void 0!==o?o:[]),i={$$cache:s,has:e=>!!i.get(e),clear:()=>{s.clear(),r.clear()},clone:()=>t({...l,values:s,keys:r}),set:(t,l)=>{var n;const a=null!=l?l:t;let o=s;const i=e(v(t));for(let e=0,l=i.length;e<l;e++){const v=i[e];e!==l-1?((null===(n=o.get(v))||void 0===n?void 0:n.next)||o.set(v,{next:new Map}),o=o.get(v).next):o.has(v)?(o.get(v).value=a,o.get(v).params=t):(r.set(t,i),o.set(v,{value:a,params:t}))}},get:t=>{var l,n;let a,o=s;const r=e(v(t));for(let e=0,t=r.length;e<t;e++){const v=r[e];if(e===t-1){a=null===(l=o.get(v))||void 0===l?void 0:l.value;break}if(o=null===(n=o.get(v))||void 0===n?void 0:n.next,!o)break}return a},delete:t=>{var l,n,a;let o=s;const i=[],d=e(v(t));for(let e=0,t=d.length;e<t;e++){const v=d[e];if(e!==t-1){if(!o.value){const e=o;i.unshift((()=>{var t;(null===(t=e.get(v))||void 0===t?void 0:t.next)||e.delete(v)}))}if(o=null===(a=o.get(v))||void 0===a?void 0:a.next,!o)break}else void 0!==(null===(l=o.get(v))||void 0===l?void 0:l.value)&&(r.delete(o.get(v).params),delete o.get(v).value,delete o.get(v).params),(null===(n=o.get(v))||void 0===n?void 0:n.next)||(o.delete(v),i.forEach((e=>e())))}},keys:()=>[...r.keys()]};return i};exports.createCache=t;

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ksh={})}(this,(function(e){"use strict";const t=e=>Array.isArray(e)?e:[e],l=e=>{var n,o,a;const i=null!==(n=null==e?void 0:e.mapKey)&&void 0!==n?n:e=>e,s=new Map(null!==(o=null==e?void 0:e.values)&&void 0!==o?o:[]),d=new Map(null!==(a=null==e?void 0:e.keys)&&void 0!==a?a:[]),v={$$cache:s,has:e=>!!v.get(e),clear:()=>{s.clear(),d.clear()},clone:()=>l({...e,values:s,keys:d}),set:(e,l)=>{var n;const o=null!=l?l:e;let a=s;const v=t(i(e));for(let t=0,l=v.length;t<l;t++){const i=v[t];t!==l-1?((null===(n=a.get(i))||void 0===n?void 0:n.next)||a.set(i,{next:new Map}),a=a.get(i).next):a.has(i)?(a.get(i).value=o,a.get(i).params=e):(d.set(e,v),a.set(i,{value:o,params:e}))}},get:e=>{var l,n;let o,a=s;const d=t(i(e));for(let e=0,t=d.length;e<t;e++){const i=d[e];if(e===t-1){o=null===(l=a.get(i))||void 0===l?void 0:l.value;break}if(a=null===(n=a.get(i))||void 0===n?void 0:n.next,!a)break}return o},delete:e=>{var l,n,o;let a=s;const v=[],r=t(i(e));for(let e=0,t=r.length;e<t;e++){const i=r[e];if(e!==t-1){if(!a.value){const e=a;v.unshift((()=>{var t;(null===(t=e.get(i))||void 0===t?void 0:t.next)||e.delete(i)}))}if(a=null===(o=a.get(i))||void 0===o?void 0:o.next,!a)break}else void 0!==(null===(l=a.get(i))||void 0===l?void 0:l.value)&&(d.delete(a.get(i).params),delete a.get(i).value,delete a.get(i).params),(null===(n=a.get(i))||void 0===n?void 0:n.next)||(a.delete(i),v.forEach((e=>e())))}},keys:()=>[...d.keys()]};return v};e.createCache=l,Object.defineProperty(e,"__esModule",{value:!0})}));
